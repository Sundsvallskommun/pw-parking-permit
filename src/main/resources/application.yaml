spring:
  application:
    name: pw-parking-permit
  security:
    oauth2:
      client:
        provider:
          casedata:
            token-uri: ${config.casedata.token-uri}
          templating:
            token-uri: ${config.templating.token-uri}
          messaging:
            token-uri: ${config.messaging.token-uri}
        registration:
          casedata:
            authorization-grant-type: client_credentials
            provider: casedata
            client-id: ${config.casedata.client-id}
            client-secret: ${config.casedata.client-secret}
          templating:
            authorization-grant-type: client_credentials
            provider: templating
            client-id: ${config.templating.client-id}
            client-secret: ${config.templating.client-secret}
          messaging:
            authorization-grant-type: client_credentials
            provider: messaging
            client-id: ${config.messaging.client-id}
            client-secret: ${config.messaging.client-secret}

#----------------------------------------
# Open API
#----------------------------------------
openapi:
  name: ${spring.application.name}
  title: ${spring.application.name}
  version: '@project.version@'

#-------------------------------------------
# Log config
#-------------------------------------------
logging:
  level:
    root: INFO
logbook:
  exclusionfilters:
    json-path: '{"$..attachments[*].file" : "[base64]"}'

#----------------------------------------
# Camunda
#----------------------------------------
camunda:
  bpm:
    client:
      base-url: ${config.camunda.base-url}
    deployment:
      processes:
        - name: Parking permit process
          tenant: PARKING_PERMIT
          bpmnResourcePattern: classpath*:processmodels/*.bpmn
          dmnResourcePattern: classpath*:processmodels/*.dmn
          formResourcePattern: classpath*:processmodels/*.form
  worker:
    max:
      retries: 3
    retry:
      timeout: 10

#----------------------------------------
# Integration settings
#----------------------------------------
# Rest client
integration:
  camunda:
    connectTimeout: 5
    readTimeout: 20
    url: ${config.camunda.base-url}
  casedata:
    connectTimeout: 5
    readTimeout: 20
    url: ${config.casedata.base-url}
  templating:
    connectTimeout: 5
    readTimeout: 20
    url: ${config.templating.base-url}
  messaging:
    connectTimeout: 5
    readTimeout: 20
    url: ${config.messaging.base-url}

#----------------------------------------
# Circuit breakers
#----------------------------------------
resilience4j.circuitbreaker:
  instances:
    casedata:
      ignoreExceptions: se.sundsvall.dept44.exception.ClientProblem
    templating:
      ignoreExceptions: se.sundsvall.dept44.exception.ClientProblem
    messaging:
      ignoreExceptions: se.sundsvall.dept44.exception.ClientProblem

#----------------------------------------
# Message properties
#----------------------------------------
message:
  common:
    department: SBK(Gatuavdelningen, Trafiksektionen)
    contact-info-email: sundsvalls.kommun@sundsvall.se
    contact-info-phonenumber: +46 60 191000
    contact-info-text: Kontakta oss via epost eller telefon.
    contact-info-url: https://sundsvall.se/
  approval:
    description: Personen är folkbokförd i Sundsvalls kommun. Rekommenderat beslut är att godkänna ansökan.
  denial:
    message: Ärendet avskrivs
    filename: beslut.pdf
    subject: Beslut från Sundsvalls kommun
    htmlBody: <p><strong>Hej</strong></p><p>Du har f&aring;tt ett beslut fr&aring;n Sundsvalls kommun.</p><p>Med v&auml;nlig h&auml;lsning<br /><strong>Sundsvalls kommun</strong></p>
    plainBody: |-
      Hej
      
      Du har fått ett beslut från Sundsvalls kommun.

      Med vänlig hälsning
      Sundsvalls kommun
    description: Personen inte folkbokförd i Sundsvalls kommun.
    lawHeading: 13 kap. 8§ Parkeringstillstånd för rörelsehindrade
    lawSfs: Trafikförordningen (1998:1276)
    lawChapter: 13
    lawArticle: 8    
